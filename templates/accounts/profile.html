{% extends "layouts/base.html" %}
{% load static %}  {# <-- Add this line at the very top #}

{% block content %}
<div class="content-wrapper">
  <section class="content-header">
    <h1>User Profile</h1>
  </section>

  <section class="content">
    <div class="card card-primary card-outline">
      <div class="card-body box-profile">
        <div class="text-center">
          {% if user.avatar %}
            <img src="{{ MEDIA_URL }}{{ user.avatar }}" 
                 class="profile-user-img img-fluid img-circle" 
                 alt="{{ user.username }} Avatar" width="100">
          {% else %}
            <img src="{% static 'dist/img/user2-160x160.jpg' %}" 
                 class="profile-user-img img-fluid img-circle" 
                 alt="Default Avatar" width="100">
          {% endif %}
        </div>

        <h3 class="profile-username text-center">{{ user.username }}</h3>
        <p class="text-muted text-center">{{ user.email }}</p>
        <p class="text-muted text-center"><i>{{ user.role|default:"Member" }}</i></p>

        <ul class="list-group list-group-unbordered mb-3">
          <li class="list-group-item">
            <b>First Name</b> <span class="float-right">{{ user.first_name|default:"-" }}</span>
          </li>
          <li class="list-group-item">
            <b>Last Name</b> <span class="float-right">{{ user.last_name|default:"-" }}</span>
          </li>
          <li class="list-group-item">
            <b>Phone</b> <span class="float-right">{{ user.phone|default:"Not set" }}</span>
          </li>
          <li class="list-group-item">
            <b>Joined</b> <span class="float-right">{{ user.date_joined|date:"D M Y" }}</span>
          </li>
        </ul>

        <a href="{% url 'edit_profile' %}" class="btn btn-primary btn-block"><b>Edit Profile</b></a>
      </div>
    </div>
  </section>
</div>
{% endblock %}
