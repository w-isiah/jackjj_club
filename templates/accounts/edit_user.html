{% extends "layouts/base.html" %}
{% load static %}

{% block title %}Edit User | Jack JJ Club{% endblock title %}

{% block content %}
<div class="content-wrapper">
  <section class="content-header">
    <h1>Edit User</h1>
  </section>

  <section class="content">
    <div class="card card-primary">
      <div class="card-header">
        <h3 class="card-title">Update User Details</h3>
      </div>

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="card-body">

          <div class="form-group">
            <label>Avatar</label><br>
            {% if user.avatar %}
              <img src="{{ MEDIA_URL }}{{ user.avatar }}" width="100" class="img-circle mb-2">
            {% else %}
              <img src="{% static 'dist/img/user2-160x160.jpg' %}" width="100" class="img-circle mb-2">
            {% endif %}
            <input type="file" name="avatar" class="form-control-file">
          </div>

          <div class="form-group">
            <label>Member ID</label>
            <input type="text" name="member_id" class="form-control" value="{{ user.member_id }}">
          </div>

          <div class="form-group">
            <label>Username</label>
            <input type="text" name="username" class="form-control" value="{{ user.username }}">
          </div>

          <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" class="form-control" value="{{ user.email }}">
          </div>

          <div class="form-group">
            <label>First Name</label>
            <input type="text" name="first_name" class="form-control" value="{{ user.first_name }}">
          </div>

          <div class="form-group">
            <label>Last Name</label>
            <input type="text" name="last_name" class="form-control" value="{{ user.last_name }}">
          </div>

          <div class="form-group">
            <label>Phone</label>
            <input type="text" name="phone" class="form-control" value="{{ user.phone }}">
          </div>

          <div class="form-group">
            <label>Role</label>
            <select name="role" class="form-control">
              <option value="member" {% if user.role == "member" %}selected{% endif %}>Member</option>
              <option value="admin" {% if user.role == "admin" %}selected{% endif %}>Admin</option>
              <option value="treasurer" {% if user.role == "treasurer" %}selected{% endif %}>Treasurer</option>
              <option value="secretary" {% if user.role == "secretary" %}selected{% endif %}>Secretary</option>
              <option value="ict_secretary" {% if user.role == "ict_secretary" %}selected{% endif %}>ICT Secretary</option>
              <option value="mobilizer" {% if user.role == "mobilizer" %}selected{% endif %}>Mobilizer</option>
              <option value="signatory" {% if user.role == "signatory" %}selected{% endif %}>Signatory</option>
            </select>
          </div>

          <div class="form-check">
            <input type="checkbox" class="form-check-input" name="is_active" {% if user.is_active %}checked{% endif %}>
            <label class="form-check-label">Active</label>
          </div>

        </div>

        <div class="card-footer">
          <button type="submit" class="btn btn-primary">Save Changes</button>
          <a href="{% url 'users_list' %}" class="btn btn-secondary">Cancel</a>
        </div>
      </form>
    </div>
  </section>
</div>
{% endblock content %}
