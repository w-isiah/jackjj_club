{% extends "layouts/base.html" %}

{% block content %}
<div class="content-wrapper">
  <!-- Page header -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Edit Profile</h1>
        </div>
      </div>
    </div>
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="row">
      <div class="col-md-8 offset-md-2">
        <div class="card card-primary">
          <div class="card-header">
            <h3 class="card-title">Update Your Information</h3>
          </div>

          <!-- form start -->
          <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="card-body">
              <!-- Username -->
              <div class="form-group">
                <label for="id_username">Username</label>
                <input type="text" name="username" id="id_username" 
                       value="{{ user.username }}" class="form-control" required>
              </div>

              <!-- Email -->
              <div class="form-group">
                <label for="id_email">Email</label>
                <input type="email" name="email" id="id_email" 
                       value="{{ user.email }}" class="form-control" required>
              </div>

              <!-- First Name -->
              <div class="form-group">
                <label for="id_first_name">First Name</label>
                <input type="text" name="first_name" id="id_first_name" 
                       value="{{ user.first_name }}" class="form-control">
              </div>

              <!-- Last Name -->
              <div class="form-group">
                <label for="id_last_name">Last Name</label>
                <input type="text" name="last_name" id="id_last_name" 
                       value="{{ user.last_name }}" class="form-control">
              </div>

              <!-- Phone -->
              <div class="form-group">
                <label for="id_phone">Phone</label>
                <input type="text" name="phone" id="id_phone" 
                       value="{{ user.phone }}" class="form-control">
              </div>

              <!-- Role (only if admin) -->
              {% if user.role == "admin" %}
              <div class="form-group">
                <label for="id_role">Role</label>
                <input type="text" name="role" id="id_role" 
                       value="{{ user.role }}" class="form-control">
              </div>
              {% endif %}

              <!-- Avatar -->
              <div class="form-group">
                <label for="id_avatar">Avatar</label><br>
                {% if user.avatar %}
                  <img src="{{ MEDIA_URL }}{{ user.avatar }}" 
                       alt="Avatar" class="img-thumbnail mb-2" width="100">
                  <br>
                {% endif %}
                <input type="file" name="avatar" id="id_avatar" class="form-control">
              </div>
            </div>

            <!-- Footer -->
            <div class="card-footer text-right">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Update Profile
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}
